<html><head><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@bobrov1989"><meta name="twitter:title" content="Introduction to Functional JavaScript"><meta name="twitter:description" content="Functional programming - this words you might read a lot of times during last year, especially in JavaScript context. Today I'll try to demystify its fundamental principles for newbies in easiest and beginner-friendly manner."><meta name="twitter:image" content="https://bobrov.dev/images/posts/introduction-to-functional-js/introduction-to-functional-js-og.jpg"><meta name="twitter:image:alt" content="Introduction to Functional JavaScript"></head><body><p>Functional programming – this words you might read a lot of times during last year, especially in JavaScript context. Today I’ll try to demystify its fundamental principles for newbies in easiest and beginner-friendly manner.</p>
<p>So what is functional programming? You can find some definition in <a href="https://en.wikipedia.org/wiki/Functional_programming" target="_blank" rel="nofollow noreferrer noopener">Wikipedia</a>, but long story short, <strong>functional programming</strong> (FP) is a programming paradigm to write concise and readable code. JavaScript itself give developer freedom what coding style to use – Object-Oriented (OOP), Procedural or Functional. But on the other side functions in JS are the <em>first-class citizen</em>. That means that functions could be pass as an argument to other functions. This is one of the primary conditions to write functional code.</p>
<p>But you may ask – why we should make code functional? It is the reasonable question, and there are some cons that it brings:</p>
<ul><li>Reusable</li>
<li>Readable</li>
<li>Easy to test</li>
<li>Less error prone</li>
</ul>
<p>The main difference that classes operate with objects and its state, as well as other objects states, it is good and bad at the same time. Why? - Because you might need to synchronize states of different objects at runtime to control your application. Functional programming instead brings the idea that functions shouldn’t change anything outside function scope. Such changes called <strong>side-effects</strong>.</p>
<p>OOP creates the connection between objects that results in problems in testing. In tests developers trying to separate each piece of functionality to avoid the impact of other modules. That means that you should mock dependencies, write more boilerplate code, etc. Functional programming instead forces you to write independent pieces of code, that also says that such code could be used in other places or even projects without any modifications.</p>
<p>Unfortunately, any application with user interface could be created without side-effects because you need to fetch data from backed, manipulate DOM-tree or even log something to console. All these actions also are side-effects and produce <strong>mutations</strong> – data changes.</p>
<h2>Pure functions</h2>
<p>The functions that don’t manipulate with any values outside its scope called <strong>pure functions</strong>. There are simple rules to write such functions:</p>
<ul><li>It should always return value</li>
<li>It should <strong>NOT</strong> change any data outside</li>
<li>It should always return the same result for the same passed arguments</li>
</ul>
<p>Looks simple, doesn’t it? So the simple example of the pure function:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Always return 5.</span>
</code></pre>
<p>You may say that it too easy, but here is the example how to easy broke the rules:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">impureAdd</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">impureAdd</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// return 5.</span>
</code></pre>
<p>As you can see function make the same manipulation and returns the same result but it changes global variable <code>x</code> that is out of its scope. It this case if another function changed this variable result will be different, this means that function could return another value for the same passed argument – it is not pure.</p>
<p>One of the features for which developers love ES2016 (also known as ES6) – <em>arrow functions</em>, they provide short and expressive way to write such simple functions, also called <strong>lambda</strong>. Here is the pretified modern variand of <code>add</code> function:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=></span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>
</code></pre>
<p>The same function written in one line (one-liner), I’m loving it!</p>
<h2>Immutability</h2>
<p>Another important idea of FP that implies side-effects are reducing – immutable data. The main purpose that value that has been assigned once can’t change, and instead re-assigning value we should provide a new one.</p>
<p>JavaScript as universal language doesn’t provide immutable data structures out-of-box. The only immutable primitive is a <code>String</code>. Whenever you modify the string, under the hood JS engine return you a completely new string. Here is the example:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'Change This String'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> noSpaces <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> lowerStr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Still same string `Change This String`.</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// New modified string `ChangeThisString`.</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>noSpaces<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Another modifies source string `change this string`.</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lowerStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Any method call on an original string modified source, every time new string created for the new variable. But if we try to do something with objects the result might be confusing.</p>
<p>One of the nice features that ES2015 brought to us is a <code>const</code> keyword. Its name looks like a <em>constant</em> and seems to mean immutability, but it only <strong>mean that you can’t assign a completely new value to a variable defined with it</strong>. What it means in practice:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">var</span> mutableObj <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

mutableObj <span class="token operator">=</span> <span class="token punctuation">{</span>b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// no errors.</span>

<span class="token keyword">const</span> immutableObj <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// will throw TypeError: "Assignment to constant variable".</span>
imuutableObj <span class="token operator">=</span> <span class="token punctuation">{</span>b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>But in other hand you can modify objects and no error will be thrown.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> immutable <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// no errors.</span>
immutable<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
immutable<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>immutable<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {a: 3, b: 4}.</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// no error.</span>
arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4].</span>
</code></pre>
<p>To make such objects really immutable, we need to prevent any modifications, changing existing values, adding new values. <code>Object</code> in JavaScript has a static method called <code>freeze</code> that prevent object mutations, but only in a shallow manner. Here is code proof:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> imm <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// no errors.</span>
imm<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
imm<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>imm<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {a: 1} nothing changed.</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  arr<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// no error.</span>
obj<span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {arr: [1, 2, 3]} array was changed.</span>
</code></pre>
<p>As you see <code>Object.freeze</code> doesn’t provide deep object immutability. In such cases, you could use special immutable data structures provided by libraries like <a href="https://facebook.github.io/immutable-js/" target="_blank" rel="nofollow noreferrer noopener">ImmutableJS</a>. But in real projects, you only need such libraries to use in tests. Instead of including it in your production application you should propose a convention in your team to not mutate data, and proof this convention in unit tests.</p>
<h2>Readability</h2>
<p>Readability means that your code should be written in more expressive. In most situations, you should prefer ternary operators, replace switch statements, use <code>Array</code> methods to manipulate data instead using loops. But this not means that you should obfuscate code by hands, always think about how your code will be read and is it simple to realize what is going on. If you don’t keep that in mind, your teammates will hate you and your code 😠. Below there are a bunch of how to DO and to DON’T write functional code.</p>
<h3>if/else statements</h3>
<p>DON’T: Write if/else for simple cases.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// - DON'T.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>DO: Use ternary operators for simple cases.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">var</span> b <span class="token operator">=</span> a <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre>
<p>DON’T: Use multiple ternary operators.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> b <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> c <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre>
<p>DO: Use if/else for sibling statements.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">var</span> a<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> esle <span class="token punctuation">{</span>
  a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3>switch statements</h3>
<p>DON’T: Use switch for simple value assignment.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">var</span> result<span class="token punctuation">;</span>

<span class="token keyword">switch</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token string">'someValue'</span><span class="token punctuation">:</span>
    result <span class="token operator">=</span> <span class="token string">'something'</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>

  <span class="token keyword">case</span> <span class="token string">'otherValue'</span><span class="token punctuation">:</span>
    result <span class="token operator">=</span> <span class="token string">'another'</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>

  <span class="token keyword">default</span><span class="token punctuation">:</span>
    result <span class="token operator">=</span> <span class="token string">'default'</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>DO: Use object literal for simple value assigment.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">{</span>
  someValue<span class="token punctuation">:</span> <span class="token string">'something'</span><span class="token punctuation">,</span>
  otherValue<span class="token punctuation">:</span> <span class="token string">'another'</span>
<span class="token punctuation">}</span><span class="token punctuation">[</span>value<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">'default'</span><span class="token punctuation">;</span>
</code></pre>
<p>The result will be the same as in the previous example with <code>switch</code>, but it is shorter and more readable. You trying to get object value by the key provided in <code>value</code> variable, if value not found it returns <code>undefined</code> and the default value will be assigned.</p>
<h3>Loops</h3>
<p>DON’T: Use loops for simple data modification.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator"><</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>DO: Use array methods and try not to mutate data.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> doubled <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>i <span class="token operator">=></span> i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>With arrow functions, such array manipulations become short and expressive.</p>
<h2>Summary</h2>
<p>There were fundamental principles of Functional Programming. It was straightforward, isn’t it? After you feel good about this one, you could start to dive deeper. In the next article, I’ll explain how to handle arrays modifications functionally. Stay tuned and write your questions in the comments. Let the functional force be with you 😎.</p>
<script defer src="https://cdn.commento.io/js/commento.js" data-css-override="https://bobrov.dev/css/commento.css"></script></body></html>