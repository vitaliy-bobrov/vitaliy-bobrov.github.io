<html><head><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@bobrov1989"><meta name="twitter:title" content="Deep Dive into Array Methods"><meta name="twitter:description" content="Knowledge of JavaScript Array methods is fundamental. It allows writing code in functional style. As not all of those methods are immutable developers should know when to handle or avoid data mutations. Another essential feature of array methods is context handling as it could dramatically simplify your code."><meta name="twitter:image" content="https://bobrov.dev/images/posts/deep-dive-into-array-methods/deep-dive-into-array-methods-og.jpg"><meta name="twitter:image:alt" content="Deep Dive into Array Methods"></head><body><p>Knowledge of JavaScript <code>Array</code> methods is fundamental. It allows writing code in functional style. As not all of those methods are immutable developers should know when to handle or avoid data mutations. Another essential feature of array methods is context handling as it could dramatically simplify your code.</p>
<p>In this article, I want to show you some examples that are close to real use-cases rather than theory. If you need documentation, you can get it on <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="nofollow noreferrer noopener">MDN</a>.</p>
<h2>Immutable methods</h2>
<p>JavaScript provides a bunch of immutable methods for arrays manipulations. What does it mean? These methods not mutate data and always return a new modified array.</p>
<h3>Map</h3>
<p>The method is used to map array dataset, make some modifications on each array element. Indifference to <code>forEach</code> method, it always returns a new array instead modifying existing. For example, you have a list of blog posts, and you want to get a list of posts id’s to get comments for each of them:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> posts <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    title<span class="token punctuation">:</span> <span class="token string">'Post 1'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    title<span class="token punctuation">:</span> <span class="token string">'Post 3'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> postIDs <span class="token operator">=</span> posts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>post <span class="token operator">=></span> post<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>postIDs<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 3]</span>
</code></pre>
<p>Combining map method with <em>arrow function</em> makes the code more readable and declarative. Another example, after getting posts comments from some source (back-end API for example), we want to add comments data to each post, no problems it’ll be easy with <code>map</code>:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> comments <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    post<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    comment<span class="token punctuation">:</span> <span class="token string">'Cool article!'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'User 1'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    post<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    comment<span class="token punctuation">:</span> <span class="token string">'Thanks'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'User 2'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    post<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    comment<span class="token punctuation">:</span> <span class="token string">'Nice'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'User 3'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> postsWithComments <span class="token operator">=</span> posts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>post <span class="token operator">=></span> <span class="token punctuation">{</span>
  post<span class="token punctuation">.</span>comments <span class="token operator">=</span> comments
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>comment <span class="token operator">=></span> comment<span class="token punctuation">.</span>post <span class="token operator">===</span> post<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> post<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>You might figure out that we used another method to find the comment by post id – <code>filter</code>. Let take a look at this method.</p>
<h3>Filter</h3>
<p>Filter method is advantageous when we need to make the partial copy of data that is aligned to some rule. In the previous example, we get comments that have <code>post</code> property equals post <code>id</code>. As you may know, methods could be <em>chained</em>, for example, you need to get ids of posts that are related to “JavaScript” category:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> posts <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    title<span class="token punctuation">:</span> <span class="token string">'Some title'</span><span class="token punctuation">,</span>
    category<span class="token punctuation">:</span> <span class="token string">'JavaScript'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
    title<span class="token punctuation">:</span> <span class="token string">'Some title'</span><span class="token punctuation">,</span>
    category<span class="token punctuation">:</span> <span class="token string">'Ruby'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token number">31</span><span class="token punctuation">,</span>
    title<span class="token punctuation">:</span> <span class="token string">'Some title'</span><span class="token punctuation">,</span>
    category<span class="token punctuation">:</span> <span class="token string">'JavaScript'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> jsCatPosts <span class="token operator">=</span> posts
  <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>post <span class="token operator">=></span> post<span class="token punctuation">.</span>category <span class="token operator">===</span> <span class="token string">'JavaScript'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>post <span class="token operator">=></span> post<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jsCatPosts<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 31]</span>
</code></pre>
<p>Another example, you want to remove duplicated items from the list, the simplest way is to filter list with the condition:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> duplicates <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> unique <span class="token operator">=</span> duplicates
  <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>item <span class="token operator">=></span> duplicates<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">===</span> duplicates<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>unique<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 5, 6, 8, 9]</span>
</code></pre>
<p>Here we used <code>indexOf</code> and <code>lastIndexOf</code> methods to check item uniquness. Those methods often used to check if item is present in list, but better to use new <code>includes</code> method for that, if possible of cource 🤓:</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// indexOf return -1 if no occurances found.</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token comment">// true,</span>

<span class="token comment">// Less readable variation, please do NOT use it.</span>
<span class="token operator">~</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// true.</span>

<span class="token comment">// Better ES6 way</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// false.</span>
</code></pre>
<h3>Concat</h3>
<p>Sometimes you need to add new element or elements to the array, here is <code>concat</code> method on a rescue. It returns new united array:</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// Mutation way to add the new item.</span>
<span class="token keyword">const</span> postIds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">67</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

postIds<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [23, 67, 87, 12]</span>

<span class="token comment">// Immutable way.</span>
<span class="token keyword">let</span> postIds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">67</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

postIds <span class="token operator">=</span> postIds<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [23, 67, 87, 12]</span>
</code></pre>
<p>But in ES2015 there is another way to join arrays – <em>spread operator</em>. It is more readable in my taste 😇:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">let</span> postIds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">67</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

postIds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>postIds<span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span> <span class="token comment">// [23, 67, 87, 12]</span>

<span class="token comment">// Merging 2 arrays</span>
<span class="token keyword">const</span> list1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> list2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> union <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>list1<span class="token punctuation">,</span> <span class="token operator">...</span>list2<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 6, 5, 4]</span>
</code></pre>
<p>The good news that spread operator works with new JavaScript types as well, for example with <code>Set</code>:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> setOfIds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

setOfIds<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [45, 32, 11] only unique values</span>
setOfIds<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [45, 32, 11, 12]</span>

<span class="token keyword">const</span> listOfIds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> allIds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>setOfIds<span class="token punctuation">,</span> <span class="token operator">...</span>listOfIds<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// [45, 32, 11, 12, 13, 14, 15]</span>
</code></pre>
<h3>Reduce</h3>
<p><code>reduce</code> one of the most powerful methods of the array. Developers are using it in functional style JavaScript. You could aggregate data using this method or transparently transform <code>Array</code> to another type. Reduce could be used to replace other methods as well, for example, <code>filter</code> implementation with <code>reduce</code>:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> oddNums <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>filtered <span class="token punctuation">,</span>num<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">%</span><span class="token number">2</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    filtered<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> filtered<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oddNums<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 3]</span>
</code></pre>
<p>Other example, gather statistics about letters occurance in array of strings:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> words <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'html'</span><span class="token punctuation">,</span> <span class="token string">'css'</span><span class="token punctuation">,</span> <span class="token string">'js'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> statistics <span class="token operator">=</span> words<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>stats<span class="token punctuation">,</span> word<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> letters <span class="token operator">=</span> word<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  letters<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>letter <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> stats<span class="token punctuation">[</span>letter<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      stats<span class="token punctuation">[</span>letter<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      stats<span class="token punctuation">[</span>letter<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> stats<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>statistics<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// {h: 1, t: 1, m: 1, l: 1, c: 1, j: 1, s: 3}</span>
</code></pre>
<p>In this example, we transformed <code>Array</code> into statistics <code>Object</code> with reducing help. Here we used <code>forEach</code> method to iterate over letters in a word because we haven’t modified letters array, but when you need to change items in a list prefer <code>map</code> method instead.</p>
<p>There is <code>reduceRight</code> method in the specification, the only difference that it starts iterate from the end of an array instead start in <code>reduce</code>.</p>
<h3>Every & Some</h3>
<p><code>every</code> and <code>some</code> methods could be implemented with <code>reduce</code> as well because they transform <code>Array</code> into <code>boolean</code>. Every check if all items align with a provided condition. Some instead return <code>true</code> if any of items follow condition. As the example imagine that you need to check all items have a <code>children</code> property:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> normalizedTree <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    children<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    children<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    children<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> isValidTreeItems <span class="token operator">=</span> normalizedTree<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span>item <span class="token operator">=></span> item<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>isValidTreeItems<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre>
<p>Here is the situation when you need to set the intermediate state for parent checkbox if any child selected:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> parent <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  value<span class="token punctuation">:</span> <span class="token string">'JS'</span><span class="token punctuation">,</span>
  children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      value<span class="token punctuation">:</span> <span class="token string">'React'</span><span class="token punctuation">,</span>
      selected<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      value<span class="token punctuation">:</span> <span class="token string">'Vue'</span><span class="token punctuation">,</span>
      selected<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      value<span class="token punctuation">:</span> <span class="token string">'Angular'</span><span class="token punctuation">,</span>
      selected<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> intermediate <span class="token operator">=</span> parent<span class="token punctuation">.</span>chilred<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>item <span class="token operator">=></span> item<span class="token punctuation">.</span>selected<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>intermediate<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true.</span>
</code></pre>
<h3>Slice</h3>
<p>Slice is used to make partial or full copy of array, the API is pretty clear:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> partial <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2]</span>
</code></pre>
<p>It is usefull to make copy of array to use some of mutation methods on it:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// Make a copy.</span>
<span class="token keyword">const</span> sorted <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sorted<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sorted<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3];</span>
</code></pre>
<p>Here we made the sorted copy of the initial array. To sort the array we used <code>sort</code> method, we can pass callback inside it to compare non-primitive items. This callback should return number: negative if the first element less than previous, zero if they are equal or positive if first value bigger than second. Here is the simple example to sort the list of objects by date:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">sortByDate</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  a<span class="token punctuation">.</span>date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> b<span class="token punctuation">.</span>date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> posts <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    date<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2017-06-22'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    date<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2017-06-01'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    date<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2017-06-16'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

posts<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>sortByDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3>Of & From</h3>
<p>Those two methods are compabions to create new array, <code>of</code> creates array of all passed arguments. <code>from</code> creates array from any <em>iterable</em> object, like <code>Map</code>, <code>Set</code> or <code>String</code>:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> list <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token keyword">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3]</span>

<span class="token keyword">const</span> box <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
box<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
box<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> boxList <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>box<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2]</span>

<span class="token comment">// But also remember about spread operator</span>

<span class="token keyword">const</span> otherBoxList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>box<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2]</span>
</code></pre>
<h2>Context handling</h2>
<p>Some of the array methods, like <code>map</code>, can pass context as the last argument. In some cases, it is beneficial, but nobody knows/remember about such possibility and start to use <code>bind</code> / <code>call</code> / <code>apply</code> to change execution context.</p>
<p>Let us imagine you have some service to fetch data from REST API, and after the response, you need to map all received data, using the same class method and properties:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">PostsService</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>http<span class="token punctuation">,</span> dataParse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>http <span class="token operator">=</span> http<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dateParse <span class="token operator">=</span> dateParse<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'api/v1/posts'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> data <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>postsMapper<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">postsMapper</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    post<span class="token punctuation">.</span>date <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dateParse</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> post<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>So you can see that we are injecting some date parsing function into our service. Then we use it to parse date on each received post. As <code>postsMapper</code> used <code>PostsService</code> method inside it needs to have the same context. Instead, bind context in the constructor we simply pass <code>this</code> as the last argument. Here is the full list of <code>Array</code> methods that can pass context as the last argument:</p>
<ul><li>every</li>
<li>filter</li>
<li>find</li>
<li>findIndex</li>
<li>forEach</li>
<li>map</li>
<li>some</li>
</ul>
<h2>Epilog</h2>
<p>That is all that I’ve wanted to tell about most useful array methods, hope some of the examples will find their place in your projects and will improve your JavaScript skills 😎.</p>
<script defer src="https://cdn.commento.io/js/commento.js" data-css-override="https://bobrov.dev/css/commento.css"></script></body></html>