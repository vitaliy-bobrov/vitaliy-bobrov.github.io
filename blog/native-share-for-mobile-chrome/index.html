<!doctype html><html lang="en"><head><title>Native Share for Mobile Chrome | Bobrov Blog</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="Improve you users experience with native share widget on Android devices."><meta name="viewport" content="width=device-width,initial-scale=1,minimal-ui"><meta name="msapplication-tap-highlight" content="no"><meta name="mobile-web-app-capable" content="yes"><meta name="application-name" content="Bobrov Blog"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content="Bobrov Blog"><meta name="msapplication-TileColor" content="#00bcd4"><link rel="alternate" type="application/rss+xml" href="https://vitaliy-bobrov.github.io/rss.xml"><link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-touch-icon.png"><link rel="icon" type="image/png" href="/images/icons/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/images/icons/favicon-16x16.png" sizes="16x16"><meta name="theme-color" content="#00bcd4"><link rel="manifest" href="/manifest.json"><meta http-equiv="origin-trial" data-feature="Web Share" data-expires="2017-03-23" content="AjkNePf4AUkcoG6xZrnSoBIoLSHrfwacxbFNGF3l7rokrvXzN2ngXJA0WInpRo3ydbh0T6n6UtPJvCNc+D/e5AMAAABaeyJvcmlnaW4iOiJodHRwczovL3ZpdGFsaXktYm9icm92LmdpdGh1Yi5pbzo0NDMiLCJmZWF0dXJlIjoiV2ViU2hhcmUiLCJleHBpcnkiOjE0OTAzMTMxOTZ9"><meta name="google-site-verification" content="-49tfdke4pxwhrBhLHu5VHTk-bb7g9jK_xQuD5Elq2Y"><link rel="dns-prefetch" href="//google-analytics.com"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//bobrov-blog.disqus.com"><link rel="stylesheet" href="/css/styles.css"><meta property="fb:app_id" content="393821434298248"><meta property="article:author" content="https://www.facebook.com/bobrov1989"><meta property="og:url" content="https://vitaliy-bobrov.github.io/blog/native-share-for-mobile-chrome/"><meta property="og:type" content="article"><meta property="og:title" content="Native Share for Mobile Chrome"><meta property="og:description" content="Improve you users experience with native share widget on Android devices."><meta property="og:image" content="https://vitaliy-bobrov.github.io/images/posts/native-share-for-mobile-chrome/native-share-for-mobile-chrome-og.jpg"><meta property="og:image:url" content="https://vitaliy-bobrov.github.io/images/posts/native-share-for-mobile-chrome/native-share-for-mobile-chrome-og.jpg"><meta property="og:image:type" content="image/jpeg"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@bobrov1989"><meta name="twitter:title" content="Native Share for Mobile Chrome"><meta name="twitter:description" content="Improve you users experience with native share widget on Android devices."><meta name="twitter:image" content="https://vitaliy-bobrov.github.io/images/posts/native-share-for-mobile-chrome/native-share-for-mobile-chrome-og.jpg"><meta name="twitter:image:alt" content="Native Share for Mobile Chrome"></head><body class="mdlext-dark-color-theme"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="0" height="0" style="position:absolute"><defs><svg viewbox="0 0 24 24" id="arrow-back"><path fill="none" d="M0 0h24v24H0z"/><path d="M20 11H7.8l5.6-5.6L12 4l-8 8 8 8 1.4-1.4L7.8 13H20v-2z"/></svg> <svg viewbox="0 0 24 24" id="comment"><path d="M22 4c0-1-1-2-2-2H4C3 2 2 3 2 4v12c0 1 1 2 2 2h14l4 4V4zm-4 10H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/><path fill="none" d="M0 0h24v24H0z"/></svg> <svg viewbox="0 0 24 24" id="expand-less"><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"/></svg> <svg viewbox="0 0 96.1 96.1" id="facebook"><path d="M72 0H59.7c-14 0-23 9.3-23 23.7v11H24c-1 0-2 .7-2 1.8v15.8c0 1 1 2 2 2h12.6v40c0 1 .8 1.8 2 1.8h16.3c1 0 1.8-.8 1.8-1.8v-40h14.7c1 0 2-.8 2-2V36.6c0-.5-.2-1-.6-1.4-.5-.2-1-.4-1.5-.4H56.8v-9.3c0-4.4 1-6.7 7-6.7H72c1.2 0 2-1 2-2V2c0-1-.8-2-2-2z"/></svg> <svg viewbox="0 0 478.6 478.6" id="github"><path d="M427.5 200.7c1.8-11.2 3-23.6 3.2-37.4 0-59.2-28.5-80.2-34-90 8-45-1.3-65.3-5.6-72.3-16-5.7-56 14.7-77 29-36-10.2-111-9.2-139 3C123-4.4 95.6 1.3 95.6 1.3s-18 31.7-5 78.3c-17 21.8-29.7 37.2-29.7 78 0 9.8 0 19 1 28C77 262.8 138 296.2 198 302c-9 6.3-19.7 19.3-21.2 35-11.4 7-34.3 9.2-52 4-25-8-34.6-57.7-72-50-8 1-6.4 6.2.6 11 11.3 7 22 16.3 30.2 36 6.2 15 19.5 42 62 42 16.5 0 28.2-2 28.2-2l.3 53.3c0 17.3-23 22-23 30.4 0 3.3 7.7 3.6 13.8 3.6 12.4 0 37.8-10.2 37.8-28V367c0-18.2 10-24 10-24s1 97.7-2.4 110.8c-4.2 15.3-12 13-12 20 0 10.2 30.8 2.5 41-20 8-17 4.5-112.8 4.5-112.8l8.2-.2s0 44-.3 64c-.3 20.7-2.4 47 10 59.3 8 8 32.8 23 32.8 10 0-7.5-17.4-14-17.4-34.3V345c10.6 0 12.8 31 12.8 31l3.8 57.7s-2.5 21 22.7 30c9 3 28 4 29-1.4 1-5.2-23-13-23-29.3 0-10 .5-16 .5-59s-5.7-59-26-72c58.7-6 119.5-32.2 130.5-101z"/></svg> <svg viewbox="0 0 315 315" id="google-plus"><path d="M307.5 137h-19.8v-20c0-4-3.3-7.4-7.5-7.4h-26.7c-4.2 0-7.5 3.4-7.5 7.5v20h-19.8c-4 0-7.5 3.3-7.5 7.5V171c0 4.3 3.4 7.6 7.5 7.6H246v19.8c0 4 3.3 7.5 7.5 7.5h26.7c4.2 0 7.5-3.6 7.5-7.7v-19.8h19.8c4 0 7.5-3.3 7.5-7.5v-26.6c0-4.2-3.4-7.5-7.5-7.5zM102 104.2c9 0 17.7 2.4 25.2 7l8.5 6c3 2 7 1.5 9.5-1L170 91.6c1.6-1.6 2.4-3.8 2.2-6-.2-2.2-1.4-4.2-3.2-5.5l-14.4-9.7-1-.5-14-7s-.3 0-.5-.2c-12-4.7-24.5-7.2-37.5-7.2-26.8 0-52 10.3-71 29C11 103.4 0 129 0 156.8c-.2 27.8 10.2 53.7 29.4 73 19 19 45.8 30 73.8 30 27.6 0 53.6-11 71.2-29.6 14-14.8 22.5-34.7 24.7-57.3v-.8l.5-20.4v-1.3l-1.2-7c-.5-3.6-3.7-6.3-7.4-6.3h-87c-4 0-7.4 3.3-7.4 7.5v29.8c0 4.2 3.4 7.5 7.5 7.5h44.4c-2 4.5-5.2 9.2-9.2 13.5-8.7 9.5-21.8 15-36 15-14.3 0-28-5.6-37.7-15.5-20-20.4-19.8-56 .5-76.2 9.5-9.4 22.7-14.8 36-14.8z"/></svg> <svg viewbox="0 0 310 310" id="linkedin"><path d="M72.2 99.7H10c-2.8 0-5 2.3-5 5v200c0 2.7 2.2 5 5 5h62c2.7 0 5-2.3 5-5v-200c0-2.7-2.3-5-5-5zM41 .3C18.5.3 0 18.7 0 41.3c0 22.7 18.4 41 41 41 22.7 0 41-18.3 41-41 0-22.6-18.3-41-41-41zm189.5 94.5c-25 0-43.5 10.7-54.7 23v-13c0-2.8-2.3-5-5-5h-59.6c-2.8 0-5 2.2-5 5v200c0 2.6 2.2 5 5 5h62c2.8 0 5-2.4 5-5v-99c0-33.4 9-46.4 32.4-46.4 25.3 0 27.3 20.8 27.3 48v97.3c0 2.7 2 5 5 5h62c2.7 0 5-2.3 5-5V195c0-49.6-9.6-100.2-79.6-100.2z"/></svg> <svg viewbox="0 0 24 24" id="menu"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg> <svg viewbox="0 0 24 24" id="share"><path fill="none" d="M0 0h24v24H0z"/><path d="M18 16c-.8 0-1.4.4-2 .8l-7-4v-1.5l7-4c.5.4 1.2.7 2 .7 1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3v.7l-7 4C7.5 9.4 6.8 9 6 9c-1.7 0-3 1.3-3 3s1.3 3 3 3c.8 0 1.5-.3 2-.8l7.2 4.2v.6c0 1.6 1.2 3 2.8 3 1.6 0 3-1.4 3-3s-1.4-3-3-3z"/></svg> <svg viewbox="0 0 612 612" id="twitter"><path d="M612 116.3c-22.5 10-46.7 16.7-72 19.7 25.8-15.5 45.7-40 55-69.4C571 81 544 91.4 515.4 97c-23-24.3-55.5-39.6-91.6-39.6C354.4 57.4 298 113.7 298 183c0 9.8 1.2 19.4 3.4 28.6C197 206.3 104.6 156.3 42.6 80.4c-10.8 18.5-17 40-17 63 0 43.6 22.2 82 56 104.6-20.7-.7-40-6.4-57-15.8v1.6c0 60.8 43.3 111.5 100.7 123-10.5 3-21.6 4.5-33 4.5-8.2 0-16-.8-23.7-2.4 16 50 62.3 86 117.3 87-43 34-97.4 54-156 54-10.3 0-20.3-.7-30-1.8C55.5 534 121.4 555 192.3 555c231 0 357.2-191.4 357.2-357.3l-.4-16.3c24.7-17.5 46-39.6 62.8-64.7z"/></svg></defs></svg><div class="mdl-layout mdl-layout--no-desktop-drawer-button mdl-layout--fixed-header mdl-js-layout"><header class="mdl-layout__header" role="banner"><div class="mdl-layout__header-row"><span class="mdl-layout-title"><a class="site-link" href="/">Bobrov Blog</a></span><div class="mdl-layout-spacer"><a href="/" class="site-logo" title="Bobrov Blog"><picture class="site-logo__picture"><source media="(min-width: 1025px)" srcset="/images/logo.webp, /images/logo@2x.webp 2x" type="image/webp"><source media="(min-width: 1025px)" srcset="/images/logo.png, /images/logo@2x.png 2x"><source media="(min-width: 768px)" srcset="/images/logo-tablet.webp, /images/logo-tablet@2x.webp 2x" type="image/webp"><source media="(min-width: 768px)" srcset="/images/logo-tablet.png, /images/logo-tablet@2x.png 2x"><source srcset="/images/logo-mobile.webp, /images/logo-mobile@2x.webp 2x" type="image/webp"><source srcset="/images/logo-mobile.png, /images/logo-mobile@2x.png 2x"><img src="/images/logo.png" alt="Bobrov Blog Logo" class="site-logo__img" itemprop="logo"></picture></a></div><nav class="mdl-navigation mdl-layout--large-screen-only"><a class="mdl-navigation__link" href="/">Blog</a> <a class="mdl-navigation__link" href="/about/">About</a></nav></div></header><div class="mdl-layout__drawer"><span class="mdl-layout-title">Bobrov Blog</span><nav class="mdl-navigation"><a class="mdl-navigation__link" href="/" aria-current="page">Blog</a> <a class="mdl-navigation__link" href="/about/">About</a></nav></div><main class="mdl-layout__content js-to-top-container"><section class="mdl-grid posts-grid"><article class="mdl-card mdl-shadow--3dp mdl-cell post mdl-cell--12-col"><header class="mdl-card__media post__media"><picture class="safe-picture"><source media="(min-width: 1025px)" srcset="/images/posts/native-share-for-mobile-chrome/native-share-for-mobile-chrome.webp, /images/posts/native-share-for-mobile-chrome/native-share-for-mobile-chrome@2x.webp 2x" type="image/webp"><source media="(min-width: 1025px)" srcset="/images/posts/native-share-for-mobile-chrome/native-share-for-mobile-chrome.jpg, /images/posts/native-share-for-mobile-chrome/native-share-for-mobile-chrome@2x.jpg 2x"><source media="(min-width: 768px)" srcset="/images/posts/native-share-for-mobile-chrome/native-share-for-mobile-chrome-tablet.webp, /images/posts/native-share-for-mobile-chrome/native-share-for-mobile-chrome-tablet@2x.webp 2x" type="image/webp"><source media="(min-width: 768px)" srcset="/images/posts/native-share-for-mobile-chrome/native-share-for-mobile-chrome-tablet.jpg, /images/posts/native-share-for-mobile-chrome/native-share-for-mobile-chrome-tablet@2x.jpg 2x"><source srcset="/images/posts/native-share-for-mobile-chrome/native-share-for-mobile-chrome-mobile.webp, /images/posts/native-share-for-mobile-chrome/native-share-for-mobile-chrome-mobile@2x.webp 2x" type="image/webp"><source srcset="/images/posts/native-share-for-mobile-chrome/native-share-for-mobile-chrome-mobile.jpg, /images/posts/native-share-for-mobile-chrome/native-share-for-mobile-chrome-mobile@2x.jpg 2x"><img src="/images/posts/native-share-for-mobile-chrome/native-share-for-mobile-chrome.jpg" alt="Native Share for Mobile Chrome" class="safe-picture__img"></picture><div class="safe-gradient"></div><h1 class="post__title">Native Share for Mobile Chrome</h1></header><section class="post__info post-info"><div class="post-info__data"><picture class="post-info__avatar"><source srcset="/images/authors/bobrov/avatar.webp, /images/authors/bobrov/avatar@2x.webp 2x" type="image/webp"><source srcset="/images/authors/bobrov/avatar.jpg, /images/authors/bobrov/avatar@2x.jpg 2x"><img src="/images/authors/bobrov/avatar.jpg" alt="Vitaliy Bobrov Photo" class="mdl-list__item-avatar"></picture><div class="post-info__data-wrapper"><div class="post-info__author">Vitaliy Bobrov</div><time date-time="2017-02-15T01:00:00+01:00" class="post-info__date">15 February 2017</time></div></div><div class="post-info__side"><div class="post-info__categories"><a href="/category/guides" class="mdl-chip post-info__category"><span class="mdl-chip__text">Guides</span></a></div></div></section><div class="mdl-card__menu post-share"><button id="share-menu-[object Object]" class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect post-share__button js-share-btn" title="Share this post" aria-label="Share this post" data-share-title="Native Share for Mobile Chrome" data-share-text="Improve you users experience with native share widget on Android devices." data-share-url="https://vitaliy-bobrov.github.io/blog/native-share-for-mobile-chrome"><svg class="mdl-svg post-share__icon"><use xlink:href="#share"/></svg></button><ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect share-menu js-share-menu"><li class="mdl-menu__item share-menu__item"><a href="//www.facebook.com/sharer.php?u=https://vitaliy-bobrov.github.io/blog/native-share-for-mobile-chrome" class="share-menu__link" target="_blank" rel="nofollow noreferrer noopener"><svg class="share-menu__icon"><use xlink:href="#facebook"/></svg> Facebook</a></li><li class="mdl-menu__item share-menu__item"><a href="//twitter.com/home?status=https://vitaliy-bobrov.github.io/blog/native-share-for-mobile-chrome" class="share-menu__link" target="_blank" rel="nofollow noreferrer noopener"><svg class="share-menu__icon"><use xlink:href="#twitter"/></svg> Twitter</a></li><li class="mdl-menu__item share-menu__item"><a href="//linkedin.com/shareArticle?url=https://vitaliy-bobrov.github.io/blog/native-share-for-mobile-chrome" class="share-menu__link" target="_blank" rel="nofollow noreferrer noopener"><svg class="share-menu__icon"><use xlink:href="#linkedin"/></svg> LinkedIn</a></li><li class="mdl-menu__item share-menu__item"><a href="//plus.google.com/share?url=https://vitaliy-bobrov.github.io/blog/native-share-for-mobile-chrome" class="share-menu__link" target="_blank" rel="nofollow noreferrer noopener"><svg class="share-menu__icon"><use xlink:href="#google-plus"/></svg> Goggle+</a></li></ul></div><section class="post__contents"><p>New features come to Web standards every day and their goal to improve user experience visitors of your web page. Sharing to social networks is one of the must-have features in modern web. Today I want to show how easy add native share widget for your users on Android devices with Chrome 55+.</p><p>Web Share API is an experimental feature available in Chrome for Android from 2016, but it came as a unflagged feature only to Chrome 55. There is only one difficulty to use that feature now – you need to sign up form to get <a href="https://github.com/jpchase/OriginTrials/blob/gh-pages/developer-guide.md" target="_blank" rel="nofollow noreferrer noopener">Origin Trial</a> token because the feature is still experimental. This limitation will present till April 2017, then it’ll be possible just to use Web Share as any other browser API. Read down the fast &amp; simple step-by-step guide how to add native sharing in your project.</p><h2>Step 1: Pre-requirements</h2><p>As many other modern features like Service Worker, Web Share requires the secure connection (HTTPS) to your resource. Another requirement is to fill <a href="https://docs.google.com/forms/d/e/1FAIpQLSfO0_ptFl8r8G0UFhT0xhV17eabG-erUWBDiKSRDTqEZ_9ULQ/viewform?entry.1999497328=Web+Share+(Experimenting+until+April+2017)" target="_blank" rel="nofollow noreferrer noopener">form</a> to get Origin Trial token. After filling it you’ll receive a token that could be used only for domain and sub-domain you write (as well as <code>localhost</code> for local testing). This token is needed only till April 2017. Then you must add the meta tag with a token to the page’s head section:</p><pre><code class="language-html lang-html">    <span class="hljs-comment">&lt;!-- Origin Trials --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">http-equiv</span>=<span class="hljs-value">"origin-trial"</span> <span class="hljs-attribute">data-feature</span>=<span class="hljs-value">"Web Share"</span> <span class="hljs-attribute">data-expires</span>=<span class="hljs-value">"DATE"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"YOUR_TOKEN"</span>&gt;</span>
</code></pre><p><code>data-expires</code> attribute is not required to be present on that tag, but you should renew token if it will expire.</p><p>And finally, the main restriction – share action should be invoked with user action like click, tap, etc. It is the logical requirement to avoid speculations with Web Share API by some “marketing” tricks.</p><h2>Step 2: Add trigger in markup</h2><p>As we need user interaction to call native share some trigger needs to be added in the page markup. It may be just a link with some share URL for users that will not have a share feature in their browser or like in my case buttons that trigger sharing menu for such users.</p><pre><code class="language-html lang-html"><span class="hljs-comment">&lt;!-- Link example --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"//twitter.com/home?status=LINK_TO_PAGE"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"js-share-link"</span>&gt;</span>Share on Twitter<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Share menu example --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">button</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"js-share-button"</span>&gt;</span>Share this page<span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">aside</span> <span class="hljs-attribute">role</span>=<span class="hljs-value">"menu"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"js-share-menu"</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- List of sharing links --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">aside</span>&gt;</span>
</code></pre><h2>Step 3: JavaScript handler</h2><p>And the last stage – we need to add JavaScript code to call share in the browser that supports Web Share API and alternative variant to other users.</p><h3>Share function</h3><p>This function will get an object with 3 possible properties needed for sharing: title, text, url. Note that one – text or url must be passed to <code class="lang-css"><span class="hljs-tag">navigator</span><span class="hljs-class">.share</span></code> method or both of them. All properties must be a string. Share returns <code class="lang-js"><span class="hljs-built_in">Promise</span></code> and you could handle success and error results with <code class="lang-bash"><span class="hljs-keyword">then</span></code> and/or <code class="lang-js"><span class="hljs-keyword">catch</span></code> methods.</p><p>Success callback can be used to notify and thank the user for sharing, sending data to analytics and so on.<img src="/images/posts/native-share-for-mobile-chrome/img/thanks.jpg" alt="Thank you for share message"></p><p>Error callback can be used to log error or like I did – notify a user about failed sharing and ask to try again.<img src="/images/posts/native-share-for-mobile-chrome/img/retry.jpg" alt="Ask user to retry share after error"></p><pre><code class="language-js lang-js"><span class="hljs-keyword">const</span> nativeShare = data =&gt; navigator.share(data)
      .then(() =&gt; {
        <span class="hljs-comment">// Here might be code to thank and notify a user.</span>
      })
      .catch(error =&gt; <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'Error sharing:'</span>, error));
</code></pre><h3>Share data function</h3><p>We need some function to prepare object with sharing data. This data could be gathered from any part of your source and depend on current context. For example in share action will share current page you could use <code class="lang-js"><span class="hljs-built_in">document</span>.title</code>, current or canonical url, page description, also if you have <a href="http://ogp.me/" target="_blank" rel="nofollow noreferrer noopener">OpenGraph</a> meta tags or <a href="http://json-ld.org/" target="_blank" rel="nofollow noreferrer noopener">JSON-LD</a> data on your page its content can be used. In my own situation, I wanted to add share widget to each item in posts list on blog pages, so I stored needed data in <code>data-attributes</code>.</p><pre><code class="language-js lang-js"><span class="hljs-keyword">const</span> getShareData = (target) =&gt; {
  <span class="hljs-keyword">let</span> title = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">let</span> text = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">let</span> url = <span class="hljs-string">''</span>;

  <span class="hljs-keyword">if</span> (target) {
    title = target.dataset.shareTitle;
    text = target.dataset.shareText;
    url = target.dataset.shareUrl;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Use document title.</span>
    title = <span class="hljs-built_in">document</span>.title;
    <span class="hljs-comment">// Used cannonical link.</span>
    text = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'link[rel="cannonical"]'</span>)
      .getAttribute(<span class="hljs-string">'href'</span>);
    <span class="hljs-comment">// Used OpenGraph tag.</span>
    url = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'[property="og:description"]'</span>)
      .getAttribute(<span class="hljs-string">'content'</span>);
  }

  <span class="hljs-keyword">return</span> {
    title,
    text,
    url
  }
};
</code></pre><h3>Single link example</h3><pre><code class="language-js lang-js"><span class="hljs-keyword">const</span> link = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.js-share-link'</span>);

<span class="hljs-keyword">const</span> onLinkClick = event =&gt; {
  event.preventDefault();

  nativeShare(getShareData(event.target));
};

<span class="hljs-keyword">if</span> (navigator.share) {
  link.addEventListener(<span class="hljs-string">'click'</span>, onLinkClick);
}
</code></pre><p>If share feature available in users browser we prevent the standard behavior, gather data for sharing and call <code>share</code> method. If Web Share is not available or any of requirements not achieved user will follow default Twitter link. So in both cases, the link will be functional.</p><h3>Share menu example</h3><pre><code class="language-js lang-js"><span class="hljs-keyword">const</span> button = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.js-share-button'</span>);
<span class="hljs-keyword">const</span> menu = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.js-share-menu'</span>);

<span class="hljs-keyword">const</span> onButtonClick = event =&gt; {
  event.preventDefault();

  <span class="hljs-keyword">if</span> (navigator.share) {
    nativeShare(getShareData(event.target));
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Show custom menu.</span>
    menu.classList.add(<span class="hljs-string">'share-menu_visible'</span>);
  }
};

button.addEventListener(<span class="hljs-string">'click'</span>, onButtonClick);
</code></pre><p>By taping on share button user gets native share widget.<img src="/images/posts/native-share-for-mobile-chrome/img/share-native.jpg" alt="Native share in Chrome for Android"></p><p>If Web Share not supported – custom share menu will be shown.<img src="/images/posts/native-share-for-mobile-chrome/img/share-menu.jpg" alt="Share custom menu"></p><p>All examples don’t provide completed monolith implementation, as the developer I want to give you a choice. All this code is like a guideline and final decisions up-to-you. Web Share API is simple and cost nothing to add and improve your projects UX.</p></section></article><div id="disqus_thread" class="mdl-card mdl-shadow--3dp mdl-cell mdl-cell--12-col comments-widget"></div></section></main><div aria-live="assertive" aria-atomic="true" aria-relevant="text" class="mdl-snackbar mdl-js-snackbar"><div class="mdl-snackbar__text"></div><button type="button" class="mdl-snackbar__action"></button></div><footer role="contentinfo" class="mdl-mini-footer page-footer"><a href="#top" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--primary mdl-button--fab mdl-button--mini-fab to-top js-to-top"><svg class="mdl-svg to-top__icon"><use xlink:href="#expand-less"/></svg></a><section class="mdl-mini-footer--left-section page-footer__left-section"><a href="https://twitter.com/bobrov1989" target="_blank" rel="nofollow noreferrer noopener" class="mdl-mini-footer--social-btn" title="Twitter"><svg class="mdl-mini-footer--social-btn__icon"><use xlink:href="#twitter"/></svg> </a><a href="https://github.com/vitaliy-bobrov" target="_blank" rel="nofollow noreferrer noopener" class="mdl-mini-footer--social-btn" title="GitHub"><svg class="mdl-mini-footer--social-btn__icon"><use xlink:href="#github"/></svg></a></section><section class="mdl-copyright"><p>&copy; 2017 Bobrov Blog</p></section><section class="mdl-mini-footer--right-section page-footer__right-section"><p>Generated with <a href="http://metalsmith.io/" target="_blank" rel="nofollow noreferrer noopener">Metalsmith</a></p></section></footer></div><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
    ga('create', 'UA-90372372-1', 'auto');
    ga('set', 'transport', 'beacon');
    ga('send', 'pageview');</script><script async src="https://www.google-analytics.com/analytics.js"></script><script src="/js/main.min.js" async defer></script><script>var disqus_config = function() {
        this.page.url = 'https://vitaliy-bobrov.github.io/blog/native-share-for-mobile-chrome';
        this.page.identifier = 'native_share_for_mobile_chrome';
        this.page.title = 'Native Share for Mobile Chrome';
      };

      (function(d) {
        var s = d.createElement('script');
        s.src = '//bobrov-blog.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })(document);</script></body></html>