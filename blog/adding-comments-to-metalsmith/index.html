<!doctype html><html lang="en"><head><title>Adding Comments to Metalsmith | Bobrov Blog</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="Metalsmith is a static site generator, so developer won&#x27;t to implement commenting functionality from scratch."><meta name="viewport" content="width=device-width,initial-scale=1,minimal-ui"><meta name="msapplication-tap-highlight" content="no"><meta name="mobile-web-app-capable" content="yes"><meta name="application-name" content="Bobrov Blog"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content="Bobrov Blog"><meta name="msapplication-TileColor" content="#00bcd4"><link rel="alternate" type="application/rss+xml" href="https://vitaliy-bobrov.github.io/rss.xml"><link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-touch-icon.png"><link rel="icon" type="image/png" href="/images/icons/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/images/icons/favicon-16x16.png" sizes="16x16"><meta name="theme-color" content="#00bcd4"><link rel="manifest" href="/manifest.json"><meta http-equiv="origin-trial" data-feature="Web Share" data-expires="2017-04-17" content="AuUJCS+Kwd5M9d0wlpZ1vQcCzqhhzpJrnHEn+l73DDbOML0qS82MVcsMbNkaNBxHG15HXJA4OGvUP8bE3rTA4QAAAABaeyJvcmlnaW4iOiJodHRwczovL3ZpdGFsaXktYm9icm92LmdpdGh1Yi5pbzo0NDMiLCJmZWF0dXJlIjoiV2ViU2hhcmUiLCJleHBpcnkiOjE0OTI0NzM2MDB9"><meta name="google-site-verification" content="-49tfdke4pxwhrBhLHu5VHTk-bb7g9jK_xQuD5Elq2Y"><link rel="dns-prefetch" href="//google-analytics.com"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//bobrov-blog.disqus.com"><link rel="stylesheet" href="/css/styles.css"><meta property="fb:app_id" content="393821434298248"><meta property="article:author" content="https://www.facebook.com/bobrov1989"><meta property="og:url" content="https://vitaliy-bobrov.github.io/blog/adding-comments-to-metalsmith/"><meta property="og:type" content="article"><meta property="og:title" content="Adding Comments to Metalsmith"><meta property="og:description" content="Metalsmith is a static site generator, so developer won&#x27;t to implement commenting functionality from scratch."><meta property="og:image" content="https://vitaliy-bobrov.github.io/images/posts/adding-comments-to-metalsmith/add-comments-to-metalsmith-project-og.jpg"><meta property="og:image:url" content="https://vitaliy-bobrov.github.io/images/posts/adding-comments-to-metalsmith/add-comments-to-metalsmith-project-og.jpg"><meta property="og:image:type" content="image/jpeg"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@bobrov1989"><meta name="twitter:title" content="Adding Comments to Metalsmith"><meta name="twitter:description" content="Metalsmith is a static site generator, so developer won&#39;t to implement commenting functionality from scratch."><meta name="twitter:image" content="https://vitaliy-bobrov.github.io/images/posts/adding-comments-to-metalsmith/add-comments-to-metalsmith-project-og.jpg"><meta name="twitter:image:alt" content="Adding Comments to Metalsmith"></head><body class="mdlext-dark-color-theme"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="0" height="0" style="position:absolute"><defs><svg viewbox="0 0 24 24" id="arrow-back"><path fill="none" d="M0 0h24v24H0z"/><path d="M20 11H7.8l5.6-5.6L12 4l-8 8 8 8 1.4-1.4L7.8 13H20v-2z"/></svg> <svg viewbox="0 0 24 24" id="comment"><path d="M22 4c0-1-1-2-2-2H4C3 2 2 3 2 4v12c0 1 1 2 2 2h14l4 4V4zm-4 10H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/><path fill="none" d="M0 0h24v24H0z"/></svg> <svg viewbox="0 0 24 24" id="expand-less"><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"/></svg> <svg viewbox="0 0 96.1 96.1" id="facebook"><path d="M72 0H59.7c-14 0-23 9.3-23 23.7v11H24c-1 0-2 .7-2 1.8v15.8c0 1 1 2 2 2h12.6v40c0 1 .8 1.8 2 1.8h16.3c1 0 1.8-.8 1.8-1.8v-40h14.7c1 0 2-.8 2-2V36.6c0-.5-.2-1-.6-1.4-.5-.2-1-.4-1.5-.4H56.8v-9.3c0-4.4 1-6.7 7-6.7H72c1.2 0 2-1 2-2V2c0-1-.8-2-2-2z"/></svg> <svg viewbox="0 0 478.6 478.6" id="github"><path d="M427.5 200.7c1.8-11.2 3-23.6 3.2-37.4 0-59.2-28.5-80.2-34-90 8-45-1.3-65.3-5.6-72.3-16-5.7-56 14.7-77 29-36-10.2-111-9.2-139 3C123-4.4 95.6 1.3 95.6 1.3s-18 31.7-5 78.3c-17 21.8-29.7 37.2-29.7 78 0 9.8 0 19 1 28C77 262.8 138 296.2 198 302c-9 6.3-19.7 19.3-21.2 35-11.4 7-34.3 9.2-52 4-25-8-34.6-57.7-72-50-8 1-6.4 6.2.6 11 11.3 7 22 16.3 30.2 36 6.2 15 19.5 42 62 42 16.5 0 28.2-2 28.2-2l.3 53.3c0 17.3-23 22-23 30.4 0 3.3 7.7 3.6 13.8 3.6 12.4 0 37.8-10.2 37.8-28V367c0-18.2 10-24 10-24s1 97.7-2.4 110.8c-4.2 15.3-12 13-12 20 0 10.2 30.8 2.5 41-20 8-17 4.5-112.8 4.5-112.8l8.2-.2s0 44-.3 64c-.3 20.7-2.4 47 10 59.3 8 8 32.8 23 32.8 10 0-7.5-17.4-14-17.4-34.3V345c10.6 0 12.8 31 12.8 31l3.8 57.7s-2.5 21 22.7 30c9 3 28 4 29-1.4 1-5.2-23-13-23-29.3 0-10 .5-16 .5-59s-5.7-59-26-72c58.7-6 119.5-32.2 130.5-101z"/></svg> <svg viewbox="0 0 315 315" id="google-plus"><path d="M307.5 137h-19.8v-20c0-4-3.3-7.4-7.5-7.4h-26.7c-4.2 0-7.5 3.4-7.5 7.5v20h-19.8c-4 0-7.5 3.3-7.5 7.5V171c0 4.3 3.4 7.6 7.5 7.6H246v19.8c0 4 3.3 7.5 7.5 7.5h26.7c4.2 0 7.5-3.6 7.5-7.7v-19.8h19.8c4 0 7.5-3.3 7.5-7.5v-26.6c0-4.2-3.4-7.5-7.5-7.5zM102 104.2c9 0 17.7 2.4 25.2 7l8.5 6c3 2 7 1.5 9.5-1L170 91.6c1.6-1.6 2.4-3.8 2.2-6-.2-2.2-1.4-4.2-3.2-5.5l-14.4-9.7-1-.5-14-7s-.3 0-.5-.2c-12-4.7-24.5-7.2-37.5-7.2-26.8 0-52 10.3-71 29C11 103.4 0 129 0 156.8c-.2 27.8 10.2 53.7 29.4 73 19 19 45.8 30 73.8 30 27.6 0 53.6-11 71.2-29.6 14-14.8 22.5-34.7 24.7-57.3v-.8l.5-20.4v-1.3l-1.2-7c-.5-3.6-3.7-6.3-7.4-6.3h-87c-4 0-7.4 3.3-7.4 7.5v29.8c0 4.2 3.4 7.5 7.5 7.5h44.4c-2 4.5-5.2 9.2-9.2 13.5-8.7 9.5-21.8 15-36 15-14.3 0-28-5.6-37.7-15.5-20-20.4-19.8-56 .5-76.2 9.5-9.4 22.7-14.8 36-14.8z"/></svg> <svg viewbox="0 0 310 310" id="linkedin"><path d="M72.2 99.7H10c-2.8 0-5 2.3-5 5v200c0 2.7 2.2 5 5 5h62c2.7 0 5-2.3 5-5v-200c0-2.7-2.3-5-5-5zM41 .3C18.5.3 0 18.7 0 41.3c0 22.7 18.4 41 41 41 22.7 0 41-18.3 41-41 0-22.6-18.3-41-41-41zm189.5 94.5c-25 0-43.5 10.7-54.7 23v-13c0-2.8-2.3-5-5-5h-59.6c-2.8 0-5 2.2-5 5v200c0 2.6 2.2 5 5 5h62c2.8 0 5-2.4 5-5v-99c0-33.4 9-46.4 32.4-46.4 25.3 0 27.3 20.8 27.3 48v97.3c0 2.7 2 5 5 5h62c2.7 0 5-2.3 5-5V195c0-49.6-9.6-100.2-79.6-100.2z"/></svg> <svg viewbox="0 0 24 24" id="menu"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg> <svg viewbox="0 0 24 24" id="share"><path fill="none" d="M0 0h24v24H0z"/><path d="M18 16c-.8 0-1.4.4-2 .8l-7-4v-1.5l7-4c.5.4 1.2.7 2 .7 1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3v.7l-7 4C7.5 9.4 6.8 9 6 9c-1.7 0-3 1.3-3 3s1.3 3 3 3c.8 0 1.5-.3 2-.8l7.2 4.2v.6c0 1.6 1.2 3 2.8 3 1.6 0 3-1.4 3-3s-1.4-3-3-3z"/></svg> <svg viewbox="0 0 612 612" id="twitter"><path d="M612 116.3c-22.5 10-46.7 16.7-72 19.7 25.8-15.5 45.7-40 55-69.4C571 81 544 91.4 515.4 97c-23-24.3-55.5-39.6-91.6-39.6C354.4 57.4 298 113.7 298 183c0 9.8 1.2 19.4 3.4 28.6C197 206.3 104.6 156.3 42.6 80.4c-10.8 18.5-17 40-17 63 0 43.6 22.2 82 56 104.6-20.7-.7-40-6.4-57-15.8v1.6c0 60.8 43.3 111.5 100.7 123-10.5 3-21.6 4.5-33 4.5-8.2 0-16-.8-23.7-2.4 16 50 62.3 86 117.3 87-43 34-97.4 54-156 54-10.3 0-20.3-.7-30-1.8C55.5 534 121.4 555 192.3 555c231 0 357.2-191.4 357.2-357.3l-.4-16.3c24.7-17.5 46-39.6 62.8-64.7z"/></svg></defs></svg><div class="mdl-layout mdl-layout--no-desktop-drawer-button mdl-layout--fixed-header mdl-js-layout"><header class="mdl-layout__header" role="banner"><div class="mdl-layout__header-row"><span class="mdl-layout-title"><a class="site-link" href="/">Bobrov Blog</a></span><div class="mdl-layout-spacer"><a href="/" class="site-logo" title="Bobrov Blog"><picture class="site-logo__picture"><source media="(min-width: 1025px)" srcset="/images/logo.webp, /images/logo@2x.webp 2x" type="image/webp"><source media="(min-width: 1025px)" srcset="/images/logo.png, /images/logo@2x.png 2x"><source media="(min-width: 768px)" srcset="/images/logo-tablet.webp, /images/logo-tablet@2x.webp 2x" type="image/webp"><source media="(min-width: 768px)" srcset="/images/logo-tablet.png, /images/logo-tablet@2x.png 2x"><source srcset="/images/logo-mobile.webp, /images/logo-mobile@2x.webp 2x" type="image/webp"><source srcset="/images/logo-mobile.png, /images/logo-mobile@2x.png 2x"><img src="/images/logo.png" alt="Bobrov Blog Logo" class="site-logo__img" itemprop="logo"></picture></a></div><nav class="mdl-navigation mdl-layout--large-screen-only"><a class="mdl-navigation__link" href="/">Blog</a> <a class="mdl-navigation__link" href="/about/">About</a></nav></div></header><div class="mdl-layout__drawer"><span class="mdl-layout-title">Bobrov Blog</span><nav class="mdl-navigation"><a class="mdl-navigation__link" href="/" aria-current="page">Blog</a> <a class="mdl-navigation__link" href="/about/">About</a></nav></div><main class="mdl-layout__content js-to-top-container"><section class="mdl-grid posts-grid"><article class="mdl-card mdl-shadow--3dp mdl-cell post mdl-cell--12-col"><header class="mdl-card__media post__media"><picture class="safe-picture"><source media="(min-width: 1025px)" srcset="/images/posts/adding-comments-to-metalsmith/add-comments-to-metalsmith-project.webp, /images/posts/adding-comments-to-metalsmith/add-comments-to-metalsmith-project@2x.webp 2x" type="image/webp"><source media="(min-width: 1025px)" srcset="/images/posts/adding-comments-to-metalsmith/add-comments-to-metalsmith-project.jpg, /images/posts/adding-comments-to-metalsmith/add-comments-to-metalsmith-project@2x.jpg 2x"><source media="(min-width: 768px)" srcset="/images/posts/adding-comments-to-metalsmith/add-comments-to-metalsmith-project-tablet.webp, /images/posts/adding-comments-to-metalsmith/add-comments-to-metalsmith-project-tablet@2x.webp 2x" type="image/webp"><source media="(min-width: 768px)" srcset="/images/posts/adding-comments-to-metalsmith/add-comments-to-metalsmith-project-tablet.jpg, /images/posts/adding-comments-to-metalsmith/add-comments-to-metalsmith-project-tablet@2x.jpg 2x"><source srcset="/images/posts/adding-comments-to-metalsmith/add-comments-to-metalsmith-project-mobile.webp, /images/posts/adding-comments-to-metalsmith/add-comments-to-metalsmith-project-mobile@2x.webp 2x" type="image/webp"><source srcset="/images/posts/adding-comments-to-metalsmith/add-comments-to-metalsmith-project-mobile.jpg, /images/posts/adding-comments-to-metalsmith/add-comments-to-metalsmith-project-mobile@2x.jpg 2x"><img src="/images/posts/adding-comments-to-metalsmith/add-comments-to-metalsmith-project.jpg" alt="Adding Comments to Metalsmith" class="safe-picture__img"></picture><div class="safe-gradient"></div><h1 class="post__title">Adding Comments to Metalsmith</h1></header><section class="post__info post-info"><div class="post-info__data"><picture class="post-info__avatar"><source srcset="/images/authors/bobrov/avatar.webp, /images/authors/bobrov/avatar@2x.webp 2x" type="image/webp"><source srcset="/images/authors/bobrov/avatar.jpg, /images/authors/bobrov/avatar@2x.jpg 2x"><img src="/images/authors/bobrov/avatar.jpg" alt="Vitaliy Bobrov Photo" class="mdl-list__item-avatar"></picture><div class="post-info__data-wrapper"><div class="post-info__author">Vitaliy Bobrov</div><time date-time="2017-01-30T01:00:00+01:00" class="post-info__date">30 January 2017</time></div></div><div class="post-info__side"><div class="post-info__categories"><a href="/category/guides" class="mdl-chip post-info__category"><span class="mdl-chip__text">Guides</span> </a><a href="/category/metalsmith" class="mdl-chip post-info__category"><span class="mdl-chip__text">Metalsmith</span></a></div></div></section><div class="mdl-card__menu post-share"><button id="share-menu-[object Object]" class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect post-share__button js-share-btn" title="Share this post" aria-label="Share this post" data-share-title="Adding Comments to Metalsmith" data-share-text="Metalsmith is a static site generator, so developer won&#39;t to implement commenting functionality from scratch." data-share-url="https://vitaliy-bobrov.github.io/blog/adding-comments-to-metalsmith"><svg class="mdl-svg post-share__icon"><use xlink:href="#share"/></svg></button><ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect share-menu js-share-menu"><li class="mdl-menu__item share-menu__item"><a href="//www.facebook.com/sharer.php?u=https://vitaliy-bobrov.github.io/blog/adding-comments-to-metalsmith" class="share-menu__link" target="_blank" rel="nofollow noreferrer noopener"><svg class="share-menu__icon"><use xlink:href="#facebook"/></svg> Facebook</a></li><li class="mdl-menu__item share-menu__item"><a href="//twitter.com/home?status=https://vitaliy-bobrov.github.io/blog/adding-comments-to-metalsmith" class="share-menu__link" target="_blank" rel="nofollow noreferrer noopener"><svg class="share-menu__icon"><use xlink:href="#twitter"/></svg> Twitter</a></li><li class="mdl-menu__item share-menu__item"><a href="//linkedin.com/shareArticle?url=https://vitaliy-bobrov.github.io/blog/adding-comments-to-metalsmith" class="share-menu__link" target="_blank" rel="nofollow noreferrer noopener"><svg class="share-menu__icon"><use xlink:href="#linkedin"/></svg> LinkedIn</a></li><li class="mdl-menu__item share-menu__item"><a href="//plus.google.com/share?url=https://vitaliy-bobrov.github.io/blog/adding-comments-to-metalsmith" class="share-menu__link" target="_blank" rel="nofollow noreferrer noopener"><svg class="share-menu__icon"><use xlink:href="#google-plus"/></svg> Goggle+</a></li></ul></div><section class="post__contents"><p>Comments are the important part of communication with the audience. It fits for a lot type of websites starting from blogs finishing with e-commerce. Metalsmith is a static site generator, that means (in most cases) that developer won’t to have a database and other back-end infrastructure to implement commenting functionality. But it not means that you can’t add it.</p><p>There are services that provide commenting widgets as a service in web. The most widely-used and popular of them – <a href="https://disqus.com/" target="_blank" rel="nofollow noreferrer noopener">Disqus</a>. With it, you will not care about a lot of complicated things related to comments. So what they offer to you:</p><ul><li>Commenting widget</li><li>Real-time comments updates</li><li>Comments counter widget</li><li>Spam filtering</li><li>Moderation tool</li><li>Design adapting to your website</li><li>Media resources support</li></ul><p>The site registration is pretty simple, just visit Disqus <a href="https://disqus.com/profile/signup/intent/" target="_blank" rel="nofollow noreferrer noopener">webpage</a> and follow the instructions.</p><h2>Integrate with Metalsmith</h2><p>Metalsmith was created as flexible as possible, it has a tiny core functionality. Any additional feature could be implemented as a plugin. So to simplify Disqus integration I created <a href="https://github.com/vitaliy-bobrov/metalsmith-disqus" target="_blank" rel="nofollow noreferrer noopener">plugin</a> – <code>metalsmith-disqus</code>.</p><p class="star-me"><a href="https://github.com/vitaliy-bobrov/metalsmith-disqus" target="_blank" rel="nofollow noreferrer noopener">Star on GitHub</a></p><h3>Installation</h3><p>The installation process is pretty simple, just run the command in your terminal:</p><pre><code class="language-bash">npm install --save-dev metalsmith-disqus
</code></pre><h3>Plug into Metalsmith build</h3><p>The plugin needs HTML markup to be already generated for its work because it will look for elements with configured class names and add Disqus scripts, meta tags to your page. So you need to place it after markdown files are processed, for example after <code>metalsmith-layouts</code> plugin:</p><pre><code class="language-js lang-js"><span class="hljs-keyword">const</span> Metalsmith = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith'</span>);
<span class="hljs-keyword">const</span> layouts    = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith-layouts'</span>);
<span class="hljs-keyword">const</span> disqus     = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith-disqus'</span>);

Metalsmith(__dirname)
  ...
  .use(layouts())
  .use(disqus({
    siteurl: <span class="hljs-string">'my-site.com'</span>,
    shortname: <span class="hljs-string">'my-site'</span>
  }));
</code></pre><h3>Required options</h3><p>You need to specify 2 required configuration options – <code>siteurl</code> and <code>shortname</code>. <code>siteurl</code> – needed to generate absolute URL for your pages. This is required for proper Disqus widget configuration. <code>shortname</code> is the same name that you received while website registration in Disqus admin. Disqus gives the links to widgets based on your shortname sub-domain. All other options are optional, if not specified plugin will use defaults.</p><h3>Optional configuration</h3><p><code>path</code> - Metalsmith metadata key to finding your page relative path. It is used to generate absolute URL to the page, using <code>path</code> and <code>siteurl</code>. If you using <code>metalsmith-permalinks</code> plugin you could leave it as default value – 'path’, this plugin adds <code>path</code> property to your content. Otherwise, you may pass own front matter key to the configuration:</p><pre><code class="language-js lang-css"><span class="hljs-tag">Metalsmith</span>(__<span class="hljs-tag">dirname</span>)
  ...
  <span class="hljs-class">.use</span>(<span class="hljs-tag">disqus</span>(<span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">siteurl</span>:<span class="hljs-value"> <span class="hljs-string">'my-site.com'</span>,
    shortname: <span class="hljs-string">'my-site'</span>,
    path: <span class="hljs-string">'alias'</span> // Used `alias` property to find page path.
  </span></span></span>}));
</code></pre><p><code>title</code> - Metalsmith metadata key to finding your page title that will be used in comments widget configuration. Default value – 'title’. You may pass own front matter key to the configuration:</p><pre><code class="language-js lang-css"><span class="hljs-tag">Metalsmith</span>(__<span class="hljs-tag">dirname</span>)
  ...
  <span class="hljs-class">.use</span>(<span class="hljs-tag">disqus</span>(<span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">siteurl</span>:<span class="hljs-value"> <span class="hljs-string">'my-site.com'</span>,
    shortname: <span class="hljs-string">'my-site'</span>,
    title: <span class="hljs-string">'label'</span> // Used `label` property to find page title.
  </span></span></span>}));
</code></pre><p><code>identifier</code> - Metalsmith metadata key to finding your page property from which plugin will generate the unique value. This value will be used in Disqus to define content page unique id. It will help Disqus to add the same commenting widget to all content instances, that may have few aliases, for example, the page may be available by few URLs or under different network protocols. Default value – 'title’, <code>metalsmith-disqus</code> will take the content title and sluglify it. You may pass own front matter key to the configuration:</p><pre><code class="language-js lang-css"><span class="hljs-tag">Metalsmith</span>(__<span class="hljs-tag">dirname</span>)
  ...
  <span class="hljs-class">.use</span>(<span class="hljs-tag">disqus</span>(<span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">siteurl</span>:<span class="hljs-value"> <span class="hljs-string">'my-site.com'</span>,
    shortname: <span class="hljs-string">'my-site'</span>,
    identifier: <span class="hljs-string">'uuid'</span> // Used `uuid` property to generate unique id.
  </span></span></span>}));
</code></pre><p><code>counterSelector</code> - a string that represents CSS class name selector for counter widget container. By default plugin looks for <code class="lang-css"><span class="hljs-class">.disqus-comment-count</span></code> elements in markup. Then it will add Disqus identifiers to HTML elements, so disqus widget will know what comments amount to insert inside which of them. Now only selectors starting with class name definition works.</p><h3>Widgets insertion</h3><p>There are 2 widgets possible to use from Disqus – the commenting widget and comments counter. To use comments widgets just add <code class="lang-js">comments: <span class="hljs-literal">true</span></code> to content front matter data:</p><pre><code class="language-yaml lang-js">title: Hello World
comments: <span class="hljs-literal">true</span>
</code></pre><p>But wouldn’t be enought, you need to add HTML container for Disqus comments inside your page template with id <code>disqus_thread</code>, if you’re using handlebars as templateengine it may look like this:</p><pre><code class="language-html lang-html">{{#if comments }}
<span class="hljs-comment">&lt;!-- Comments widget will be rendered in this element --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">section</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"disqus_thread"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">section</span>&gt;</span>
{{/if}}
</code></pre><p>The same manipulations needed for comments count widget, just enable <code class="lang-js">comments-counter: <span class="hljs-literal">true</span></code> in metadata and add a container to insert text with an amount of comments. The difference is that for the container you should use class name <code>disqus-comment-count</code> (configured by default) or specify any CSS class with <code>counterSelector</code> option. In addition, you need to render property to that is used as <code>identifier</code> in your settings (<code>title</code> by default) inside <code>data-disqus-key</code> attribute. This data-attribute in necessary to insert correct counter to proper content:</p><pre><code class="language-yaml lang-js">title: My page
comments-counter: <span class="hljs-literal">true</span>
</code></pre><pre><code class="language-html lang-html">{{#if comments }}
<span class="hljs-comment">&lt;!-- Comments counter will be rendered in this element --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"disqus-comment-count"</span> <span class="hljs-attribute">data-disqus-key</span>=<span class="hljs-value">"{{title}}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
{{/if}}
</code></pre><h3>Performance optimizations</h3><p>As a bonus, the plugin has the ability to prefetch Disqus DNS and/or preload scripts by simple parameters in YAML front matter. Adding <code class="lang-js">disqus-dns-prefetch: <span class="hljs-literal">true</span></code> will add line tag that will tell the browser to start resolving disqus hosts earlier to decrease library loading time. Other parameters: <code class="lang-js">disqus-prefetch-widget: <span class="hljs-literal">true</span></code> and <code class="lang-js">disqus-prefetch-counter: <span class="hljs-literal">true</span></code> will force modern browsers to start loading scripts before they will be requested by the user.</p><p>Let’s imagine real project situation when you have a page(s) with listings of content that have comments, and if you add <code class="lang-js">disqus-prefetch-widget: <span class="hljs-literal">true</span></code> to this pages, while user discovering this content, modern browsers could load commenting widget script. Then after the transition to the content page, widget JavaScript will be already in place. You can check this feature support <a href="http://caniuse.com/#feat=link-rel-prefetch" target="_blank" rel="nofollow noreferrer noopener">here</a>. It is cost nothing to add it and it will not affect unsupported browsers.</p><h2>Let’s keep in touch</h2><p>If you have any issues or any ideas regarding new features, please leave them <a href="https://github.com/vitaliy-bobrov/metalsmith-disqus/issues" target="_blank" rel="nofollow noreferrer noopener">here</a>.</p></section></article><div id="disqus_thread" class="mdl-card mdl-shadow--3dp mdl-cell mdl-cell--12-col comments-widget"></div></section></main><div aria-live="assertive" aria-atomic="true" aria-relevant="text" class="mdl-snackbar mdl-js-snackbar"><div class="mdl-snackbar__text"></div><button type="button" class="mdl-snackbar__action"></button></div><footer role="contentinfo" class="mdl-mini-footer page-footer"><a href="#top" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--primary mdl-button--fab mdl-button--mini-fab to-top js-to-top"><svg class="mdl-svg to-top__icon"><use xlink:href="#expand-less"/></svg></a><section class="mdl-mini-footer--left-section page-footer__left-section"><a href="https://twitter.com/bobrov1989" target="_blank" rel="nofollow noreferrer noopener" class="mdl-mini-footer--social-btn" title="Twitter"><svg class="mdl-mini-footer--social-btn__icon"><use xlink:href="#twitter"/></svg> </a><a href="https://github.com/vitaliy-bobrov" target="_blank" rel="nofollow noreferrer noopener" class="mdl-mini-footer--social-btn" title="GitHub"><svg class="mdl-mini-footer--social-btn__icon"><use xlink:href="#github"/></svg></a></section><section class="mdl-copyright"><p>&copy; 2017 Bobrov Blog</p></section><section class="mdl-mini-footer--right-section page-footer__right-section"><p>Generated with <a href="http://metalsmith.io/" target="_blank" rel="nofollow noreferrer noopener">Metalsmith</a></p></section></footer></div><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
    ga('create', 'UA-90372372-1', 'auto');
    ga('set', 'transport', 'beacon');
    ga('send', 'pageview');</script><script async src="https://www.google-analytics.com/analytics.js"></script><script src="/js/main.min.js" async defer></script><script>var disqus_config = function() {
        this.page.url = 'https://vitaliy-bobrov.github.io/blog/adding-comments-to-metalsmith';
        this.page.identifier = 'adding_comments_to_metalsmith';
        this.page.title = 'Adding Comments to Metalsmith';
      };

      (function(d) {
        var s = d.createElement('script');
        s.src = '//bobrov-blog.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })(document);</script></body></html>