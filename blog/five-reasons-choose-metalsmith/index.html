<html><head><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@bobrov1989"><meta name="twitter:title" content="5 Reasons to Choose Metalsmith"><meta name="twitter:description" content="Few times I started to develop my blog locally, but only this implementation came into production. Previously I tried few CMS variants, other static site generators, but stop my decision on Metalsmith. I'll tell my story and try to argue why you might use Metalsmith for your next project."><meta name="twitter:image" content="https://bobrov.dev/images/posts/five-reasons-choose-metalsmith/five-reasons-choose-metalsmith-og.jpg"><meta name="twitter:image:alt" content="5 Reasons to Choose Metalsmith"></head><body><p>Few times I started to develop my blog locally, but only this implementation came into production. Previously I tried few CMS variants, other static site generators, but stop my decision on Metalsmith. I’ll tell my story and try to argue why you might use Metalsmith for your next project.</p>
<h2>Hard way – CMS</h2>
<p>About two years ago, I tried to build my blog with <a href="https://wordpress.org/" target="_blank" rel="nofollow noreferrer noopener">Wordpress</a>. It is the choice of millions of websites and especially blogs because its first purpose is a user-friendly and straightforward blogging platform. Yes, it has a significant amount of free themes, plugins, resources, but all most of this projects need a lot of work to adapt for my own needs. I can’t say about all themes/plugins, but a lot of them haven’t good code. Of course, Wordpress has its code standards called <a href="https://codex.wordpress.org/" target="_blank" rel="nofollow noreferrer noopener">Codex</a>, but if you take a look inside of some popular plugins, you’ll see that they didn’t implement this Codex.</p>
<p>As I see, WP development team concentrated only on front-end/user experience features. It seems to be logical because this is the killer-feature why users choose it. But PHP world also changed a lot in last few years, and it’ll be great to use PHP best-practices and great open-source projects. I understand that most of the users will not grasp and see this changes, but think they may feel them in performance and security improvements. Sorry WP lovers, but for me, it is not good enough.</p>
<p>Another platform that I tried to use for blogging was <a href="https://www.drupal.org/" target="_blank" rel="nofollow noreferrer noopener">Drupal</a>, the 7th. It is flexible, modular and has strict code standards. You’ll never publish theme or module on <code>drupal.org</code> without passing automatical and manual reviews. This process downside is releasing time, especially first time will take a lot of time, and this is not so good in so fast-changing web development. But my issue was related to the hard front-end part of Drupal 7. It generates a massive amount of unneeded markup that hard to control and override. In some cases, it is impossible to completely reduce it, because some theming parts need wrapper elements, etc. Drupal 7 is excellent, but front-end part is hard maintainable and requires a lot of customizations.</p>
<p>My hope was an entirely new Drupal 8. Based on <a href="https://symfony.com/" target="_blank" rel="nofollow noreferrer noopener">Symfony</a> with <a href="http://twig.sensiolabs.org/" target="_blank" rel="nofollow noreferrer noopener">Twig</a> as a template engine, it promised to be flexible on front-end. Even the core team wrote about wholly new and modern theming system. But the wonder won’t happen. To be somehow backward compatible with Drupal 7, they decided to leave theming hooks/preprocessors in Drupal 8. Of course, it becomes much more straightforward to modify, but the developer needs to know from which part of applications come some class name, part of the markup, etc. So Drupal got a hard view layer again. Hope on Drupal 9.</p>
<h2>Harcore way – custom project</h2>
<p>Next not so good idea to create a blog was to write everything from scratch on <a href="https://nodejs.org" target="_blank" rel="nofollow noreferrer noopener">NodeJS</a>. In this case, I can do what I want and have full control on a project. I planned to use <a href="http://expressjs.com/" target="_blank" rel="nofollow noreferrer noopener">Express</a> on back-end and <a href="https://www.polymer-project.org/" target="_blank" rel="nofollow noreferrer noopener">Polymer</a> on client-side. But this variant requires a lot of free time, which I haven’t. I’m only human, working in the office full-time, have a family and need time to spend with them. NodeJS is not about such static project as blogs. Each task has its own best instruments, and Node is great for some interactive projects, which need a lot of user interaction. According to blog, it can be just a comment, but in my opinion, it is not a good idea to build such project with it.</p>
<h2>Static website</h2>
<p>After all my attempts, I’ve read the tutorial about <a href="https://jekyllrb.com/" target="_blank" rel="nofollow noreferrer noopener">Jekyll</a>. How easy it looks, just create a bunch of markdown files then a little bit of magic, and you get a static website. Old cool buddies – HTML, CSS and JavaScript. And that it. The only issue was that it builds on top of Ruby. I had only a little experience with Ruby as the tool to generate SASS. It was dark old times before <code>node-sass</code> (formerly libsass) creation and saved a huge amount of time for me.</p>
<p>That is why I started looking for the similar tool as Jekyll but written with my favorite language – JavaScript. And fortunately I found it, but as usual, in open-source community (especially JS one) there are a lot of static site generators. To be honest, I’ve read documentation most of them, but tried only a few, before choosing Metalsmith.</p>
<h2>Metalsmith</h2>
<p>After trying some of the most popular static site generators, I fount most fittable one – <a href="http://www.metalsmith.io/" target="_blank" rel="nofollow noreferrer noopener">Metalsmith</a>. “It is simple, extremely simple.” It is the first thing maintainers write about the project:</p>
<blockquote><p>An extremely simple, <em>pluggable</em> static site generator.</p>
</blockquote>
<p>In general, Metalsmith is the module that operates with JavaScript objects and produces files in the end. It is pretty easy. Generator reads you files (markdown, HTML, whatever), creates a  objects tree and fill them with metadata – simple key-value pairs. Metadata could be provided with a plugin or inside files (for example as <a href="http://assemble.io/docs/YAML-front-matter.html" target="_blank" rel="nofollow noreferrer noopener">YAML front matter</a>). And that’s it. You can do what you want and how you want. There are no limitations anymore.</p>
<p>Most reasons to choose Metalsmith:</p>
<ol><li>Simple and quick configuration</li>
<li>Modular and extensible</li>
<li>No limitations for technologies and structure</li>
<li>Fast deploy process</li>
<li>Static site significantly fast</li>
</ol>
<h3>Simple and quick configuration</h3>
<p>Metalsmith builds to include plugins to generate the output according to source files. It exposes two ways to write generator config: JavaScript and JSON. It is up to you what to use, but JavaScript if preferable in this way gives the ability to generate parts of options on the fly depending on your needs. Basic config looks like this:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> Metalsmith <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'metalsmith'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">Metalsmith</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">metadata</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// Any key-value pairs to be added to any file.</span>
    site<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      url<span class="token punctuation">:</span> <span class="token string">'https://my-static-site.io'</span><span class="token punctuation">,</span>
      title<span class="token punctuation">:</span> <span class="token string">'My Static Site'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token string">'./source'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">destination</span><span class="token punctuation">(</span><span class="token string">'./build'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Metalsmith build completed'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Probably this build will only move your files from source directory to destination. All other features are plugged with <code>use</code> method.</p>
<h3>Modular and extensible</h3>
<p>Metalsmith API is pretty small and includes only 11 methods. All transformations will be done with plugins. When you are reading this article, there are already more than 200 plugins listed on the official website. But some plugins aren’t on this list yet. Even if you can’t find any plugins that fit your project needs, nothing will stop you to write your own. Thanks to Metalsmith creator, plugin API in simple as possible. Here is some basic example:</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// Expose `plugin`.</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> plugin<span class="token punctuation">;</span>

<span class="token keyword">const</span> defaults <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// Your plugin default configuration.</span>
<span class="token punctuation">}</span>


<span class="token keyword">function</span> <span class="token function">plugin</span><span class="token punctuation">(</span>opts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> config <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> defaults<span class="token punctuation">,</span> opts<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>files<span class="token punctuation">,</span> metalsmith<span class="token punctuation">,</span> done<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>

    <span class="token function">setImmediate</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Next plugin execution.</span>

    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>file <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> data <span class="token operator">=</span> files<span class="token punctuation">[</span>file<span class="token punctuation">]</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">'my-metadata'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Do something.</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>As you can mention you will operate with JavaScript objects, you can modify them as you want to get needed result. Detailed explanation how to write plugins is out of scope for this post, but you can find more in official documentation. I’ll share my experience in plugins creation in one of my next articles.</p>
<h3>No limitations for technologies and structure</h3>
<p>Nowadays every library, CSS or JavaScript framework provide us own rules: where to store files, what we can implement and how. But with Metalsmith you are entirely free in a decision. You may not include jQuery if you won’t, use and styles preprocessor, any files structure, any build system. By the way, Metalsmith can be used as build system itself. Also, it can be a project scaffolder, e-Book or project documentation generator. You are not limited to templating engine selection, UI framework, content format.</p>
<p>The only issue that all this will require experience and knowledge from a developer. Such freedom always brings a responsibility for the final result. Fortunately, we have a lot of resources and helper tools to prove that things are done right. There is an excellent list of Metalsmith <a href="https://github.com/metalsmith/awesome-metalsmith" target="_blank" rel="nofollow noreferrer noopener">awesomnesses</a>, here you can find a lot of useful information about it.</p>
<h3>Fast deploy</h3>
<p>Because everything that will be outputted by static site generator is just static files, you don’t need to setup any back-end environment. Only static server required. Even you can use <a href="https://pages.github.com/" target="_blank" rel="nofollow noreferrer noopener">GitHub Pages</a> for such purposes. It is free for limited usage.</p>
<p>You don’t need to maintain any database to store your content. For such thing I recommend you to use Git, in this case, you’ll also get a task and issue management, content versioning, collaboration for free. If you need to store some additional data, you can always try to use cloud-based service like <a href="https://firebase.google.com/" target="_blank" rel="nofollow noreferrer noopener">Firebase</a>. Need some comments? - Just add <a href="https://disqus.com/" target="_blank" rel="nofollow noreferrer noopener">Disqus</a> integration. That is just a few examples, but a lot of stuff possible to use on a service basis. Most of the services have a nice free usage quota. As a bonus – the static site is extremely secure in comparison to CMS or custom back-end.</p>
<h3>Static site significantly fast</h3>
<p>The most important feature is that static site could be as performant as possible, because there is no back-end response waiting, just get resources without any delays. It is perfect in the mobile-first internet era. Mobile traffic grows every year, that means you don’t want users to load a massive amount of data and waste time to gain information. Also, you can there are ways to improve your content delivery, as, you can use CDN for making it faster. According to all fact, you might think about static site generator as a platform for your next project or migrate current one. If you are interested in this idea, I can recommend you to look on Metalsmith for this purpose.</p>
<script defer src="https://cdn.commento.io/js/commento.js" data-css-override="https://bobrov.dev/css/commento.css"></script></body></html>